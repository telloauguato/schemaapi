# SchemaAPI _v0.1.0_

## Files `*.schema.json`

SchemaAPI files follow the filename format `<filename>.schema.json` and their basic contents follow the model below.

```json
{
    "name": "Schema Model Types and Props",
    "description": "This schema is composed of all kinds of content that can be generated by the SchemaAPI, as well as the properties assigned to it.",
    "version": "0.1.0",
    "length": -15,
    "indexed": true,
    "content": {}
}
```

|Props| Description |
|:--|:----|
| `name` **\<string>** | The name of the schema. |
| `description` **\<string>** | A description of the schema. |
|  `version` **\<string>** _required_ | Enter the version of the SchemaAPI you're using. It is necessary so that there is no conflict between versions. When empty, the API considers the latest version to be the main version of the schema. For safety is required. |
|  `length` **\<number>** | The length value defines the amount of data returned from the schema. By default its value is 1, if it receives a value less than 0, it will return a random amount between 1 and the module of the inserted number. |
|  `indexed` **\<"none" \| number \| "uuid">** | The indexed property defines the format in which the data will be returned. Following the 3 possible values: `"none"` - returning in array format in which each data occupies a space; `number` - when a numeric value greater than 0 is entered, it returns in the format of an object listed by random IDs greater than the number passed; and `"uuid"` - where the values returned in the object are keyed with a uuid value. |
| `content` **\<object>** _required_ | The content receives the types that will form the body of the data to be returned. Read Types to learn more about. |


## Types and Props

Types are inserted inside the `content` property. In it, we add the types following the `key-value` pattern. Where the key will be the `key` returned to the user, and the `value` defines the type of content that that key should return.

The required property in all types is the `type`. It is mandatory to use it in all of them, and from it it is defined which other properties will also be mandatory, as well as which properties change this data or not.

### Cell

```json
{
    "content": {
        "<key>": { "type": "<type>" }
    }
}
```

|Props| Description |
|:--|:--|
|  `key` **\<string>** _required_ | Name of the field when being generated by the SchemaAPI. |
|  `type` **\<string>** _required_ | To return a value of type `"<type>"`, you must add this property to the body of the type. |

### Property by type

#### `string`

```json
{
    "sufix": "@",
    "prefix": ".schema.api",
    "format": "lowcase"
}
```

|Props| Description |
|:--|:--|
|  `prefix` **\<string>** | The prefix property defines what comes before the generated data, as an additional. |
| `sufix` **\<string>** | With the sufix property, it defines what comes after the generated data, as an additional. Unlike the prefix that is added at the beginning, this prefix is added to the end of the string. |
| `format` **\<"uppercase" \| "lowcase">** | With the sufix property, it defines what comes after the generated data, as an additional. Unlike the prefix that is added at the beginning, this prefix is added to the end of the string. |

#### `number`

```json
{
    "round": "ceil"
}
```
|Props| Description |
|:--|:--|
| `round` **\<number \| "ceil" \| "floor">** | The round property it receives 3 types of data: `number` - in this case the number will indicate to how many decimal places it will be rounded, `"ceil"` - rounds to the nearest upper integer and `"floor"` - rounds to the nearest lower integer. Any value other than these will be considered 0 by default. |

#### `object`

```json
{
    "swear": "%x + %y = %result"
}
```
|Props| Description |
|:--|:--|
| `swear` **\<string>** | The swear property takes the fields from the object and sorts them in string format based on the `%field-name` pattern. These fields must be in string format. |

### All Types

#### `name`

```json
{
    "key": {
        "type": "name",
        "join": true
    }
}
```
|Props| Description |
|:--|:--|
| `join` **\<boolean>** _true_ | The join property defines whether the return of the type will be in object format (`false` = `{ firstname: "Sherlock", lastname: "Holmes" }`) or joining information (`true` = `"Sherlock Holmes"`). |

#### `username`

```json
{
    "key": {
        "type": "username"
    }
}
```

#### `uuid`

```json
{
    "key": {
        "type": "uuid"
    }
}
```

#### `email`

```json
{
    "key": {
        "type": "email",
        "domain": "schema.api",
        "value": "username"
    }
}
```

|Props| Description |
|:--|:--|
| `domain` **\<string \| string[]>** _"schema.api"_ | The domain property is a string, it assigns the format `<data>@<domain>` to all generated emails. When an array of strings is passed, it makes random assimilations (`<data>@<domain-1>`,`<data>@<domain-2>`,`<data>@<domain-3>`,[...],`<data>@<domain-n>`). |
| `use` **\<string>** | The use property defines a value based on a schema field. When this property exists, it stops generating a random value and adopts one that already exists in the schema. |

#### `pattern`

```json
{
    "key": {
        "type": "pattern",
        "pattern": "+1 AAA BCC DDE",
        "define": {
	        "A": "[0-9]",
	        "B": "[a-zA-Z0-9]",
	        "C": "[a-zA-Z]",
	        "D": "[^a-zA-Z0-9_\s]",
	        "E": [1, "T", "C"]
        }
    }
}
```

|Props| Description |
|:--|:--|
| `pattern` **\<string>** _required_ | The pattern property is used to define the pattern that will be applied to generate data. The value of the property must be a string containing the pattern. The pattern will be important for the property to apply the rules that determine which characters or sequences of characters will be considered valid for generating data. |
| `define` **\<objetc>** _required_ | The define property allows you to define custom rules to replace specific characters in the pattern. It receives an object as a value, where each key represents a character from the pattern and the value defines the type of data to be replaced. This property is useful for generating data with specific formats, such as phone numbers, addresses, or zip codes. |


## Typescript

```typescript
/**
 * Defines the allowed types directly.
 * - Allowed values are "name", "number", "username", "uuid", and strings starting with "@".
 */
type AllowedTypesDirect = "name" | "number" | "username" | "uuid" | `@${string}`;

/**
 * Defines the allowed types for cells.
 * - Allowed values are "pattern", "email", "options", "schema", and AllowedTypesDirect.
 */
type AllowedTypes = "pattern" | "email" | "options" | "schema" | AllowedTypesDirect;

/**
 * Defines the allowed types that define patterns.
 * - Allowed values are "numeric", "alphabetic", "alphanumeric", "special", and strings starting with "@".
 */
type AllowedTypesDefinesPattern = "numeric" | "alphabetic" | "alphanumeric" | "special" | `@${string}`;

/**
 * Defines the allowed types for mathematical calculations.
 * - Allowed values are "sum" and "multiply".
 */
type AllowedTypesCalcsMathValues = "sum" | "multiply";

/**
 * Defines the allowed types for number calculations.
 * - Allowed values are "pi", numbers, and strings starting with "@".
 */
type AllowedTypesCalcsNumbersValues = "pi" | number | `@${string}`;

/**
 * Defines the properties for returning strings.
 * - `sufix`: Optional string property for suffix.
 * - `prefix`: Optional string property for prefix.
 * - `format`: Optional property specifying the format as "uppercase" or "lowercase".
 */
interface StringReturnProperty {
  sufix?: string;
  prefix?: string;
  format?: "uppercase" | "lowercase";
}

/**
 * Defines the properties for returning objects.
 * - `swear`: Optional string property for swearing.
 */
interface ObjectReturnProperty {
  swear?: string;
}

/**
 * Defines the properties for returning numbers.
 * - `round`: Optional property for rounding, either a number, "ceil", or "floor".
 * - `max`: Optional property for maximum value.
 * - `min`: Optional property for minimum value.
 * - `increment`: Optional property for incrementing.
 * - `decrement`: Optional property for decrementing.
 * - `calc`: Optional property for calculations, an array of AllowedTypesCalcsMathValues or AllowedTypesCalcsNumbersValues.
 */
interface NumberReturnProperty {
  round?: number | "ceil" | "floor";
  max?: number;
  min?: number;
  increment?: number;
  decrement?: number;
  calc?: [AllowedTypesCalcsMathValues, number | AllowedTypesCalcsNumbersValues[]][];
}

/**
 * Defines the default cell type.
 * - `type`: A property with one of the AllowedTypesDirect values.
 */
interface DefaultCellType {
  type: AllowedTypesDirect;
}

/**
 * Defines a cell type with a specific pattern.
 * - `type`: Property with the value "pattern".
 * - `pattern`: Regular expression string representing the allowed pattern for the cell value.
 * - `define`: Object with keys defining types of patterns and values from AllowedTypesDefinesPattern.
 */
interface PatternCellType extends StringReturnProperty {
  type: "pattern";
  pattern: string;
  define: { [key: string]: AllowedTypesDefinesPattern };
}

/**
 * Defines a cell type for names.
 * - `type`: Property with the value "name".
 * - `join`: Optional boolean property for joining.
 */
interface NameCellType extends StringReturnProperty {
  type: "name";
  join?: boolean;
}

/**
 * Defines a cell type for numbers.
 * - `type`: Property with the value "number".
 */
interface NumberCellType extends NumberReturnProperty {
  type: "number";
}

/**
 * Defines a cell type for emails.
 * - `type`: Property with the value "email".
 * - `domain`: String property specifying the domain.
 * - `use`: Optional string property for usage.
 */
interface EmailCellType extends StringReturnProperty {
  type: "email";
  domain: string;
  use?: string;
}

/**
 * Defines a cell type for options.
 * - `type`: Property with the value "options".
 * - `options`: Array of strings representing available options.
 * - `length`: Optional number property for length.
 * - `order`: Optional boolean property for order.
 */
interface OptionsCellType extends StringReturnProperty {
  type: "options";
  options: string[];
  length?: number;
  order?: boolean;
}

/**
 * Defines a cell type for schemas.
 * - `type`: Property with the value "schema".
 * - `length`: Number property specifying the length.
 * - `content`: Object representing content with keys from ContentType.
 */
interface SchemaCellType {
  type: "schema";
  length: number;
  content: ContentType;
}

/**
 * Defines the possible types for cell properties.
 * - Can be NumberCellType, SchemaCellType, OptionsCellType, EmailCellType, PatternCellType, NameCellType, or DefaultCellType.
 */
type CellPropsTypes = NumberCellType | SchemaCellType | OptionsCellType | EmailCellType | PatternCellType | NameCellType | DefaultCellType;

/**
 * Defines the typing for default cell properties.
 * - Keys are strings with values from CellPropsTypes.
 */
type CellDefaultPropsTyping = {
  [key: string]: CellPropsTypes;
};

/**
 * Defines the content type for schemas.
 * - Keys are strings with values from `AllowedTypesDirect` or `CellPropsTypes`.
 */
type ContentType = {
  [key: string]: AllowedTypesDirect | CellPropsTypes;
};

/**
 * Defines a schema type [Schema Design Guide](https://www.integrate.io/blog/complete-guide-to-database-schema-design-guide/).
 * - `name`: Optional property for the schema name.
 * - `description`: Optional property for describing the schema.
 * - `version`: Required string property representing the version of the SchemaAPI.
 * - `length`: Optional number property for the length of the schema.
 * - `content`: Property representing the content of the schema, defined by ContentType.
 */
type SchemaType = {
  name?: string;
  description?: string;
  version: string
  length?: number
  content: ContentType;
};
```